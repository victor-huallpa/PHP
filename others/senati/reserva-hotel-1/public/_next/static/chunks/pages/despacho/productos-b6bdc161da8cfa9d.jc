(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[429],{6358:function(e,a,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/despacho/productos",function(){return t(6153)}])},4011:function(e,a,t){"use strict";var s=t(6154);let i=s.Z.create({baseURL:"jc_api_replace"});a.Z=i},5740:function(e,a,t){"use strict";function s(){$(document).on("click","#mainSidebarToggle",function(e){e.preventDefault(),$("body.horizontalmenu").toggleClass("main-navbar-show")}),$(".main-menu .with-sub").on("click",function(e){var a=$(this),t=a.next(),s=".nav-sub";if(t.is(s)&&t.is(":visible"))t.slideUp(300,function(){t.removeClass("open")}),t.parent("li").removeClass("show");else if(t.is(s)&&!t.is(":visible")){var i=a.parents("ul").first();i.find("ul:visible").slideUp(300).removeClass("open");var n=a.parent("li");t.slideDown(300,function(){t.addClass("open"),i.find("li.show").removeClass("show"),n.addClass("show")})}t.is(s)&&e.preventDefault()}),$(".main-menu .sub-with-sub").on("click",function(e){var a=$(this),t=a.next(),s=".sub-nav-sub";if(t.is(s)&&t.is(":visible"))t.slideUp(300,function(){t.removeClass("open")}),t.parent("li").removeClass("show");else if(t.is(s)&&!t.is(":visible")){var i=a.parents("ul").first();i.find("ul:visible").slideUp(300).removeClass("open");var n=a.parent("li");t.slideDown(300,function(){t.addClass("open"),i.find("li.show").removeClass("show"),n.addClass("show")})}t.is(s)&&e.preventDefault()});let e=!1;$(".main-profile-menu").on("click",function(a){!0==e?($("#user_menu").removeClass("show"),e=!1):($("#user_menu").addClass("show"),e=!0)})}t.d(a,{O:function(){return s}})},6153:function(e,a,t){"use strict";t.r(a);var s=t(5893),i=t(7294),n=t(4011),l=t(9109),o=t(5740);function r(e){return(0,i.useEffect)(()=>{let a=e.data,t=$("#tb_demo").DataTable({data:a,responsive:!0,language:{searchPlaceholder:"Buscar...",sSearch:"",lengthMenu:"Mostrar _MENU_ registros",paginate:{first:"Primero",last:"\xdaltimo",next:"Siguiente",previous:"Anterior"},infoFiltered:"(filtrado de un total de _MAX_ registros)",emptyTable:"Ning\xfan dato disponible en esta tabla",info:"Mostrando _START_ a _END_ de _TOTAL_ registros"},lengthMenu:[[20,50,100,-1],[20,50,100,"All"]],columns:[{data:"name"},{data:"compra",render:function(e,a){return Number(e).toFixed(2)}},{data:"venta",render:function(e,a){return Number(e).toFixed(2)}},{data:"tag.name",render:function(e,a){return' <a href="#" class="badge bg-success"><i class="ti ti-tag "></i> '.concat(e,"</a> ")}},{data:"id",render:function(e,a){return'<div class="button-list"><a href="#" class="btn"><i class="ti ti-pencil td_edit" model_id="'.concat(e,'"></i></a> <a href="#" class="btn"><i class="ti ti-trash td_delete" model_id="').concat(e,'"></i></a> </div> ')}}],initComplete:function(){var a=this.api();a.$(".td_delete").click(function(){var a;a=this.getAttribute("model_id"),e.itemDelete(a)}),a.$(".td_edit").click(function(){var a;a=this.getAttribute("model_id"),e.itemEdit(a)})}});return()=>{t.destroy()}},[e]),(0,s.jsx)("table",{id:"tb_demo",className:"table table-bordered border-bottom  no-footer",children:(0,s.jsx)("thead",{children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{children:"Nombre"}),(0,s.jsx)("th",{children:"Compra"}),(0,s.jsx)("th",{children:"Venta"}),(0,s.jsx)("th",{children:"Etiqueta"}),(0,s.jsx)("th",{children:"Accion"})]})})})}a.default=function(){let[e,a]=(0,i.useState)(null),[c,d]=(0,i.useState)(!0),[u,m]=(0,i.useState)(!0),[h,p]=(0,i.useState)(""),[f,b]=(0,i.useState)(0),[v,x]=(0,i.useState)(0),[g,j]=(0,i.useState)(0),[N,y]=(0,i.useState)(1),[w,_]=(0,i.useState)(1),[C,A]=(0,i.useState)(1),[k,E]=(0,i.useState)([]),[S,Z]=(0,i.useState)([]),[D,T]=(0,i.useState)([]),[U,M]=(0,i.useState)([]);async function R(){try{await n.Z.post("productos",{name:h,tag_id:N,venta:g,compra:v}),notif({type:"success",msg:"Guardado correctamente!",position:"center"});let e=await n.Z.get("productos"),a=await e.data;E(a),p("")}catch(e){notif({type:"error",msg:'<i class="far fa-sad-tear"></i> Algo sal\xedo mal',position:"center"})}}async function P(e){try{var a=async function(a){if(a){await n.Z.delete("productos/"+e),notif({type:"success",msg:"Eliminado correctamente!",position:"center"});let a=await n.Z.get("productos"),t=await a.data;E(t)}else notif({type:"error",msg:'<i class="far fa-sad-tear"></i>',position:"center"})};notif_confirm({textaccept:"Eliminar",textcancel:"Cerrar",message:"Deseas eliminar?",callback:a}),p("")}catch(e){notif({type:"error",msg:'<i class="far fa-sad-tear"></i> Algo sal\xedo mal',position:"center"})}}async function F(){try{await n.Z.put("productos/"+f,{name:h,tag_id:N,venta:g,compra:v}),notif({type:"success",msg:"Actualizado correctamente!",position:"center"});let e=await n.Z.get("productos"),a=await e.data;E(a),p("")}catch(e){notif({type:"error",msg:'<i class="far fa-sad-tear"></i> Algo sal\xedo mal',position:"center"})}}async function O(e){d(!1);let a=[...k].find(a=>a.id==e);p(a.name),b(a.id),y(a.tag_id),x(a.compra),j(a.venta);let{Modal:s}=t(8877),i=new s("#modalModel",{backdrop:"static",keyboard:!1});i.show(),d(!1)}async function L(e){p(e.target.value)}async function V(e){setValuetag(e.target.value)}async function X(e){j(e.target.value)}async function q(e){x(e.target.value)}return(0,i.useEffect)(()=>{m(!0),(0,o.O)();let e=async()=>{try{await Promise.all([n.Z.get("productos"),n.Z.get("detalles"),n.Z.get("nivels"),n.Z.get("tags")]).then(e=>{E(e[0].data),M(e[1].data),T(e[2].data),Z(e[3].data)})}catch(e){}finally{m(!1)}};e()},[]),(0,s.jsxs)(l.Z,{modulo:"Despacho",page:"Productos",children:[u?(0,s.jsxs)("div",{id:"global-loader",children:[" ",(0,s.jsx)("img",{src:"/assets/loader.svg",className:"loader-img",alt:"Loader"})," "]}):"",(0,s.jsxs)("div",{className:"page-header",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{className:"main-content-title tx-24 mg-b-5",children:"Productos"}),(0,s.jsxs)("ol",{className:"breadcrumb",children:[(0,s.jsx)("li",{className:"breadcrumb-item",children:(0,s.jsx)("a",{href:"#",children:"Despacho"})}),(0,s.jsx)("li",{className:"breadcrumb-item active","aria-current":"page",children:"Productos"})]})]}),(0,s.jsx)("div",{className:"d-flex",children:(0,s.jsx)("div",{className:"justify-content-center",children:(0,s.jsxs)("button",{type:"button",onClick:function(){let{Modal:e}=t(8877),a=new e("#modalModel",{backdrop:"static",keyboard:!1});a.show(),d(!0)},className:"btn btn-primary my-2 btn-icon-text",children:[(0,s.jsx)("i",{className:"fe fe-plus-circle"})," NUEVO"]})})})]}),(0,s.jsx)("div",{className:"modal ",id:"modalModel",role:"dialog",children:(0,s.jsx)("div",{className:"modal-dialog modal-md",role:"document",children:(0,s.jsxs)("div",{className:"modal-content",children:[(0,s.jsxs)("div",{className:"modal-header",children:[(0,s.jsx)("h6",{className:"modal-title",children:c?"NUEVO":"ACTUALIZAR"}),(0,s.jsx)("button",{"aria-label":"Close",className:"btn-close","data-bs-dismiss":"modal",type:"button"})]}),(0,s.jsx)("div",{className:"modal-body",children:(0,s.jsxs)("div",{className:"row",children:[(0,s.jsxs)("div",{className:"col-12",children:[(0,s.jsx)("label",{htmlFor:"",children:"Nombre"}),(0,s.jsx)("input",{className:" form-control",value:h,onChange:L})]}),(0,s.jsxs)("div",{className:"col-12",children:[(0,s.jsx)("label",{htmlFor:"",children:"Compra"}),(0,s.jsx)("input",{className:" form-control",value:v,onChange:q})]}),(0,s.jsxs)("div",{className:"col-12",children:[(0,s.jsx)("label",{htmlFor:"",children:"Venta"}),(0,s.jsx)("input",{className:" form-control",value:g,onChange:X})]}),(0,s.jsxs)("div",{className:"col-12",children:[(0,s.jsx)("label",{htmlFor:"",children:"Etiqueta"}),(0,s.jsx)("select",{className:" form-control",value:N,onChange:V,children:S.map(e=>(0,s.jsx)("option",{value:e.id,children:e.name}))})]})]})}),(0,s.jsxs)("div",{className:"modal-footer justify-content-end",children:[!0==c?(0,s.jsx)("button",{className:"btn ripple btn-primary",type:"button",onClick:R,"data-bs-dismiss":"modal",children:"GUARDAR"}):(0,s.jsx)("button",{className:"btn ripple btn-primary",type:"button",onClick:F,"data-bs-dismiss":"modal",children:"ACTUALIZAR"}),(0,s.jsx)("button",{className:"btn ripple btn-secondary","data-bs-dismiss":"modal",type:"button",children:"CERRAR"})]})]})})}),(0,s.jsx)("div",{className:"row row-sm",children:(0,s.jsx)("div",{className:"col-md-12 col-lg-12",children:(0,s.jsxs)("div",{className:"card custom-card",children:[(0,s.jsx)("div",{className:"card-header  border-bottom-0 pb-0",children:(0,s.jsx)("div",{children:(0,s.jsx)("div",{className:"d-flex",children:(0,s.jsx)("label",{className:"main-content-label my-auto pt-2",children:"Lista de productos"})})})}),(0,s.jsx)("div",{className:"card-body",children:(0,s.jsx)(r,{data:k,itemDelete:P,itemEdit:O})})]})})})]})}}},function(e){e.O(0,[827,245,877,109,774,888,179],function(){return e(e.s=6358)}),_N_E=e.O()}]);