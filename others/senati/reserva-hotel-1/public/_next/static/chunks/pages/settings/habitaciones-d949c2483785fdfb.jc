(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[454],{8374:function(e,a,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/settings/habitaciones",function(){return t(9573)}])},4011:function(e,a,t){"use strict";var s=t(6154);let i=s.Z.create({baseURL:"jc_api_replace"});a.Z=i},5740:function(e,a,t){"use strict";function s(){$(document).on("click","#mainSidebarToggle",function(e){e.preventDefault(),$("body.horizontalmenu").toggleClass("main-navbar-show")}),$(".main-menu .with-sub").on("click",function(e){var a=$(this),t=a.next(),s=".nav-sub";if(t.is(s)&&t.is(":visible"))t.slideUp(300,function(){t.removeClass("open")}),t.parent("li").removeClass("show");else if(t.is(s)&&!t.is(":visible")){var i=a.parents("ul").first();i.find("ul:visible").slideUp(300).removeClass("open");var n=a.parent("li");t.slideDown(300,function(){t.addClass("open"),i.find("li.show").removeClass("show"),n.addClass("show")})}t.is(s)&&e.preventDefault()}),$(".main-menu .sub-with-sub").on("click",function(e){var a=$(this),t=a.next(),s=".sub-nav-sub";if(t.is(s)&&t.is(":visible"))t.slideUp(300,function(){t.removeClass("open")}),t.parent("li").removeClass("show");else if(t.is(s)&&!t.is(":visible")){var i=a.parents("ul").first();i.find("ul:visible").slideUp(300).removeClass("open");var n=a.parent("li");t.slideDown(300,function(){t.addClass("open"),i.find("li.show").removeClass("show"),n.addClass("show")})}t.is(s)&&e.preventDefault()});let e=!1;$(".main-profile-menu").on("click",function(a){!0==e?($("#user_menu").removeClass("show"),e=!1):($("#user_menu").addClass("show"),e=!0)})}t.d(a,{O:function(){return s}})},9573:function(e,a,t){"use strict";t.r(a);var s=t(5893),i=t(7294),n=t(4011),l=t(9109),c=t(5740);function o(e){return(0,i.useEffect)(()=>{let a=e.data,t=$("#tb_demo").DataTable({data:a,responsive:!0,language:{searchPlaceholder:"Buscar...",sSearch:"",lengthMenu:"Mostrar _MENU_ registros",paginate:{first:"Primero",last:"\xdaltimo",next:"Siguiente",previous:"Anterior"},infoFiltered:"(filtrado de un total de _MAX_ registros)",emptyTable:"Ning\xfan dato disponible en esta tabla",info:"Mostrando _START_ a _END_ de _TOTAL_ registros"},lengthMenu:[[20,50,100,-1],[20,50,100,"All"]],columns:[{data:"name"},{data:"precio",render:function(e,a){return Number(e).toFixed(2)}},{data:"active",render:function(e,a){return 1==e?' <a href="#" class="badge bg-success"><i class="ti ti-info-alt "></i> Disponible</a> ':2==e?' <a href="#" class="badge bg-danger"><i class="ti ti-info-alt "></i> Ocupado</a> ':3==e?' <a href="#" class="badge bg-info"><i class="ti ti-info-alt "></i> Limpieza</a> ':void 0}},{data:"categoria.name",render:function(e,a){return' <a href="#" class="badge bg-success"><i class="ti ti-tag "></i> '.concat(e,"</a> ")}},{data:"nivel.name",render:function(e,a){return' <a href="#" class="badge bg-info"><i class="ti ti-home "></i> '.concat(e,"</a> ")}},{data:"detalle.name"},{data:"id",render:function(e,a){return'<div class="button-list"><a href="#" class="btn"><i class="ti ti-pencil td_edit" model_id="'.concat(e,'"></i></a> <a href="#" class="btn"><i class="ti ti-trash td_delete" model_id="').concat(e,'"></i></a> </div> ')}}],initComplete:function(){var a=this.api();a.$(".td_delete").click(function(){var a;a=this.getAttribute("model_id"),e.itemDelete(a)}),a.$(".td_edit").click(function(){var a;a=this.getAttribute("model_id"),e.itemEdit(a)})}});return()=>{t.destroy()}},[e]),(0,s.jsx)("table",{id:"tb_demo",className:"table table-bordered border-bottom  no-footer",children:(0,s.jsx)("thead",{children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{children:"Nombre"}),(0,s.jsx)("th",{children:"Precio"}),(0,s.jsx)("th",{children:"Estado"}),(0,s.jsx)("th",{children:"Categoria"}),(0,s.jsx)("th",{children:"Nivel"}),(0,s.jsx)("th",{children:"Detalle"}),(0,s.jsx)("th",{children:"Accion"})]})})})}a.default=function(){let[e,a]=(0,i.useState)(null),[r,d]=(0,i.useState)(!0),[m,u]=(0,i.useState)(!0),[h,b]=(0,i.useState)(""),[f,p]=(0,i.useState)(0),[v,x]=(0,i.useState)(0),[g,j]=(0,i.useState)(1),[N,y]=(0,i.useState)(1),[_,w]=(0,i.useState)(1),[C,A]=(0,i.useState)([]),[k,S]=(0,i.useState)([]),[E,Z]=(0,i.useState)([]),[D,T]=(0,i.useState)([]);async function U(){try{await n.Z.post("habitacions",{name:h,categoria_id:g,nivel_id:N,detalle_id:_,precio:v}),notif({type:"success",msg:"Guardado correctamente!",position:"center"});let e=await n.Z.get("habitacions"),a=await e.data;A(a),b("")}catch(e){notif({type:"error",msg:'<i class="far fa-sad-tear"></i> Algo sal\xedo mal',position:"center"})}}async function M(e){try{var a=async function(a){if(a){await n.Z.delete("habitacions/"+e),notif({type:"success",msg:"Eliminado correctamente!",position:"center"});let a=await n.Z.get("habitacions"),t=await a.data;A(t)}else notif({type:"error",msg:'<i class="far fa-sad-tear"></i>',position:"center"})};notif_confirm({textaccept:"Eliminar",textcancel:"Cerrar",message:"Deseas eliminar?",callback:a}),b("")}catch(e){notif({type:"error",msg:'<i class="far fa-sad-tear"></i> Algo sal\xedo mal',position:"center"})}}async function R(){try{await n.Z.put("habitacions/"+f,{name:h,categoria_id:g,nivel_id:N,detalle_id:_,precio:v}),notif({type:"success",msg:"Actualizado correctamente!",position:"center"});let e=await n.Z.get("habitacions"),a=await e.data;A(a),b("")}catch(e){notif({type:"error",msg:'<i class="far fa-sad-tear"></i> Algo sal\xedo mal',position:"center"})}}async function O(e){d(!1);let a=[...C].find(a=>a.id==e);b(a.name),p(a.id),j(a.categoria_id),y(a.nivel_id),w(a.detalle_id),x(a.precio);let{Modal:s}=t(8877),i=new s("#modalModel",{backdrop:"static",keyboard:!1});i.show(),d(!1)}async function F(e){b(e.target.value)}async function L(e){j(e.target.value)}async function P(e){x(e.target.value)}async function z(e){y(e.target.value)}async function H(e){w(e.target.value)}return(0,i.useEffect)(()=>{u(!0),(0,c.O)();let e=async()=>{try{await Promise.all([n.Z.get("habitacions"),n.Z.get("detalles"),n.Z.get("nivels"),n.Z.get("categorias")]).then(e=>{A(e[0].data),T(e[1].data),Z(e[2].data),S(e[3].data)})}catch(e){}finally{u(!1)}};e()},[]),(0,s.jsxs)(l.Z,{modulo:"Setting",page:"Habitaciones",children:[m?(0,s.jsxs)("div",{id:"global-loader",children:[" ",(0,s.jsx)("img",{src:"/assets/loader.svg",className:"loader-img",alt:"Loader"})," "]}):"",(0,s.jsxs)("div",{className:"page-header",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{className:"main-content-title tx-24 mg-b-5",children:"Habitaciones"}),(0,s.jsxs)("ol",{className:"breadcrumb",children:[(0,s.jsx)("li",{className:"breadcrumb-item",children:(0,s.jsx)("a",{href:"#",children:"Configuraci\xf3n"})}),(0,s.jsx)("li",{className:"breadcrumb-item active","aria-current":"page",children:"Habitaciones"})]})]}),(0,s.jsx)("div",{className:"d-flex",children:(0,s.jsx)("div",{className:"justify-content-center",children:(0,s.jsxs)("button",{type:"button",onClick:function(){let{Modal:e}=t(8877),a=new e("#modalModel",{backdrop:"static",keyboard:!1});a.show(),d(!0)},className:"btn btn-primary my-2 btn-icon-text",children:[(0,s.jsx)("i",{className:"fe fe-plus-circle"})," NUEVO"]})})})]}),(0,s.jsx)("div",{className:"modal ",id:"modalModel",role:"dialog",children:(0,s.jsx)("div",{className:"modal-dialog modal-md",role:"document",children:(0,s.jsxs)("div",{className:"modal-content",children:[(0,s.jsxs)("div",{className:"modal-header",children:[(0,s.jsx)("h6",{className:"modal-title",children:r?"NUEVO":"ACTUALIZAR"}),(0,s.jsx)("button",{"aria-label":"Close",className:"btn-close","data-bs-dismiss":"modal",type:"button"})]}),(0,s.jsx)("div",{className:"modal-body",children:(0,s.jsxs)("div",{className:"row",children:[(0,s.jsxs)("div",{className:"col-12",children:[(0,s.jsx)("label",{htmlFor:"",children:"Nombre"}),(0,s.jsx)("input",{className:" form-control",value:h,onChange:F})]}),(0,s.jsxs)("div",{className:"col-12",children:[(0,s.jsx)("label",{htmlFor:"",children:"Precio"}),(0,s.jsx)("input",{className:" form-control",value:v,onChange:P})]}),(0,s.jsxs)("div",{className:"col-12",children:[(0,s.jsx)("label",{htmlFor:"",children:"Nivel"}),(0,s.jsx)("select",{className:" form-control",value:N,onChange:z,children:E.map(e=>(0,s.jsx)("option",{value:e.id,children:e.name}))})]}),(0,s.jsxs)("div",{className:"col-12",children:[(0,s.jsx)("label",{htmlFor:"",children:"Categoria"}),(0,s.jsx)("select",{className:" form-control",value:g,onChange:L,children:k.map(e=>(0,s.jsx)("option",{value:e.id,children:e.name}))})]}),(0,s.jsxs)("div",{className:"col-12",children:[(0,s.jsx)("label",{htmlFor:"",children:"Detalle"}),(0,s.jsx)("select",{className:" form-control",value:_,onChange:H,children:D.map(e=>(0,s.jsx)("option",{value:e.id,children:e.name}))})]})]})}),(0,s.jsxs)("div",{className:"modal-footer justify-content-end",children:[!0==r?(0,s.jsx)("button",{className:"btn ripple btn-primary",type:"button",onClick:U,"data-bs-dismiss":"modal",children:"GUARDAR"}):(0,s.jsx)("button",{className:"btn ripple btn-primary",type:"button",onClick:R,"data-bs-dismiss":"modal",children:"ACTUALIZAR"}),(0,s.jsx)("button",{className:"btn ripple btn-secondary","data-bs-dismiss":"modal",type:"button",children:"CERRAR"})]})]})})}),(0,s.jsx)("div",{className:"row row-sm",children:(0,s.jsx)("div",{className:"col-md-12 col-lg-12",children:(0,s.jsxs)("div",{className:"card custom-card",children:[(0,s.jsx)("div",{className:"card-header  border-bottom-0 pb-0",children:(0,s.jsx)("div",{children:(0,s.jsx)("div",{className:"d-flex",children:(0,s.jsx)("label",{className:"main-content-label my-auto pt-2",children:"Lista de habitaciones"})})})}),(0,s.jsx)("div",{className:"card-body",children:(0,s.jsx)(o,{data:C,itemDelete:M,itemEdit:O})})]})})})]})}}},function(e){e.O(0,[827,245,877,109,774,888,179],function(){return e(e.s=8374)}),_N_E=e.O()}]);