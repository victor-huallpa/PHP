(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[133],{5501:function(e,s,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/detalle-habitacion/[id]",function(){return a(7526)}])},4011:function(e,s,a){"use strict";var c=a(6154);let l=c.Z.create({baseURL:"jc_api_replace"});s.Z=l},5740:function(e,s,a){"use strict";function c(){$(document).on("click","#mainSidebarToggle",function(e){e.preventDefault(),$("body.horizontalmenu").toggleClass("main-navbar-show")}),$(".main-menu .with-sub").on("click",function(e){var s=$(this),a=s.next(),c=".nav-sub";if(a.is(c)&&a.is(":visible"))a.slideUp(300,function(){a.removeClass("open")}),a.parent("li").removeClass("show");else if(a.is(c)&&!a.is(":visible")){var l=s.parents("ul").first();l.find("ul:visible").slideUp(300).removeClass("open");var i=s.parent("li");a.slideDown(300,function(){a.addClass("open"),l.find("li.show").removeClass("show"),i.addClass("show")})}a.is(c)&&e.preventDefault()}),$(".main-menu .sub-with-sub").on("click",function(e){var s=$(this),a=s.next(),c=".sub-nav-sub";if(a.is(c)&&a.is(":visible"))a.slideUp(300,function(){a.removeClass("open")}),a.parent("li").removeClass("show");else if(a.is(c)&&!a.is(":visible")){var l=s.parents("ul").first();l.find("ul:visible").slideUp(300).removeClass("open");var i=s.parent("li");a.slideDown(300,function(){a.addClass("open"),l.find("li.show").removeClass("show"),i.addClass("show")})}a.is(c)&&e.preventDefault()});let e=!1;$(".main-profile-menu").on("click",function(s){!0==e?($("#user_menu").removeClass("show"),e=!1):($("#user_menu").addClass("show"),e=!0)})}a.d(s,{O:function(){return c}})},7526:function(e,s,a){"use strict";a.r(s),a.d(s,{default:function(){return m}});var c=a(5893),l=a(7294),i=a(9109),t=a(1163),n=a(4011),r=a(5740);function d(e){let s=e.producto;return(0,c.jsx)("div",{className:"col-md-3 col-lg-3 col-xl-3 col-sm-3",children:(0,c.jsx)("div",{className:"card custom-card card-product",onClick:function(){e.selectProductoCard(s)},children:(0,c.jsx)("div",{className:"p-0 ht-100p",children:(0,c.jsx)("div",{className:"product-grid",children:(0,c.jsxs)("div",{className:"product-content",children:[(0,c.jsx)("h3",{className:"title",children:(0,c.jsx)("a",{href:"#",children:s.name})}),(0,c.jsx)("div",{className:"price",children:(0,c.jsx)("span",{className:"text-danger",children:Number(s.venta).toFixed(2)})})]})})})})})}function o(e){let s=e.productos;function a(s){e.selecProducto(s)}return 0!=e.nivel&&(s=e.productos.filter(s=>-1!=s.name.toLowerCase().indexOf(e.buscar.toLowerCase()))),0!=e.tag&&(s=s.filter(s=>s.tag_id==e.tag)),(0,c.jsx)("div",{className:"row",children:s.map(e=>(0,c.jsx)(d,{producto:e,selectProductoCard:a}))})}a(4184),a(4184),a(4184);var m=function(){let e=(0,t.useRouter)(),s=e.query.id,[a,d]=(0,l.useState)({nivel:{},recepcion:{recepcion_productos:[],cliente:{}}}),[m,h]=(0,l.useState)({}),[x,u]=(0,l.useState)({}),[j,p]=(0,l.useState)(!0),[N,b]=(0,l.useState)(""),[v,f]=(0,l.useState)(""),[y,g]=(0,l.useState)(0),[w,C]=(0,l.useState)([]),[O,E]=(0,l.useState)([]),[S,F]=(0,l.useState)([]);async function _(e){g(Number(e.target.value))}async function I(e){f(e.target.value)}async function D(){try{await n.Z.post("recepcion-despachar/"+a.recepcion.id,{cart:S}),F([]),await Promise.all([n.Z.get("habitacion-recepcions/"+s)]).then(e=>{d(e[0].data)})}catch(e){}}(0,l.useEffect)(()=>{p(!0),(0,r.O)();let e=async()=>{try{await Promise.all([n.Z.get("habitacion-recepcions/"+s),n.Z.get("productos"),n.Z.get("tags")]).then(e=>{d(e[0].data),C(e[1].data),E(e[2].data)})}catch(e){}finally{p(!1)}};e()},[s]);let k=[...S].reduce((e,s)=>e+Number(s.cantidad*s.venta),0),A=a.recepcion.recepcion_productos.reduce((e,s)=>e+Number(s.cantidad*s.venta),0),T=a.recepcion.dias*a.recepcion.precio;async function P(){try{let s=localStorage.getItem("hk.user");s=JSON.parse(s);let c={pendiente:T+A-a.recepcion.adelanto,caja_id:s.caja.id};await n.Z.post("recepcion-finalizar/"+a.recepcion.id,c),e.push("/")}catch(e){}}return(0,c.jsxs)(i.Z,{modulo:"Setting",page:"Categorias",children:[j?(0,c.jsxs)("div",{id:"global-loader",children:[" ",(0,c.jsx)("img",{src:"/assets/loader.svg",className:"loader-img",alt:"Loader"})," "]}):"",(0,c.jsxs)("div",{className:"page-header",children:[(0,c.jsxs)("div",{children:[(0,c.jsxs)("h2",{className:"main-content-title tx-24 mg-b-5",children:["Habitacion ",a.name]}),(0,c.jsxs)("ol",{className:"breadcrumb",children:[(0,c.jsx)("li",{className:"breadcrumb-item",children:(0,c.jsx)("a",{href:"#",children:"Recepci\xf3n"})}),(0,c.jsx)("li",{className:"breadcrumb-item active","aria-current":"page",children:a.nivel.name})]})]}),(0,c.jsx)("div",{className:"d-flex",children:(0,c.jsx)("div",{className:"justify-content-center"})})]}),(0,c.jsx)("div",{className:"row row-sm justify-content-center",children:(0,c.jsxs)("div",{className:"panel panel-primary tabs-style-2",children:[(0,c.jsx)("div",{className:"tab-menu-heading",children:(0,c.jsx)("div",{className:"tabs-menu1",children:(0,c.jsxs)("ul",{className:"nav panel-tabs main-nav-line",children:[(0,c.jsx)("li",{children:(0,c.jsx)("a",{href:"#tab4",className:"nav-link active mt-1","data-bs-toggle":"tab",children:"Despacho"})}),(0,c.jsx)("li",{children:(0,c.jsx)("a",{href:"#tab5",className:"nav-link mt-1","data-bs-toggle":"tab",children:"Recepc\xedon"})})]})})}),(0,c.jsx)("div",{className:"panel-body tabs-menu-body main-content-body-right border",children:(0,c.jsxs)("div",{className:"tab-content",children:[(0,c.jsx)("div",{className:"tab-pane active",id:"tab4",children:(0,c.jsxs)("div",{className:"row row-sm",children:[(0,c.jsx)("div",{className:"col-md-7 ",children:(0,c.jsx)("div",{className:"row row-sm",children:(0,c.jsx)(o,{productos:w,buscar:v,tag:y,selecProducto:function(e){let s=[...S].findIndex(s=>s.id==e.id);if(-1!=s){let e=[...S];e[s].cantidad=e[s].cantidad+1,notif({type:"success",msg:"Carrito actualizado !",position:"center"}),F(e)}else e.cantidad=1,e.producto={id:e.id,name:e.name},notif({type:"success",msg:"Agregado al carrito !",position:"center"}),F(S.concat(e))}})})}),(0,c.jsxs)("div",{className:"col-md-5 ",children:[(0,c.jsx)("div",{className:"card custom-card",children:(0,c.jsx)("div",{className:"card-body",children:(0,c.jsx)("div",{className:"row row-sm",children:(0,c.jsx)("div",{className:"col-sm-12",children:(0,c.jsxs)("div",{className:"input-group",children:[(0,c.jsx)("input",{type:"text",className:"form-control",placeholder:"Buscar ...",value:v,onChange:I}),(0,c.jsx)("span",{className:"",children:(0,c.jsx)("button",{className:"btn ripple btn-primary",type:"button",children:"Buscar"})})]})})})})}),(0,c.jsx)("div",{className:"row row-sm",children:(0,c.jsx)("div",{className:"col-md-12 col-lg-12",children:(0,c.jsxs)("div",{className:"card custom-card",children:[(0,c.jsx)("div",{className:"card-header custom-card-header",children:(0,c.jsx)("h6",{className:"main-content-label mb-3",children:"Informaci\xf3n"})}),(0,c.jsxs)("div",{className:"card-body",children:[(0,c.jsxs)("div",{className:"form-group w-100",children:[(0,c.jsx)("label",{className:"form-label",children:"Etiquetas"}),(0,c.jsxs)("select",{name:"beast",id:"select-beast",className:"form-control ",value:y,onChange:_,"aria-hidden":"true",children:[(0,c.jsx)("option",{value:0,children:"Todos"}),O.map(e=>(0,c.jsx)("option",{value:e.id,children:e.name}))]})]}),(0,c.jsxs)("div",{className:"row",children:[(0,c.jsx)("div",{className:"col-12",children:(0,c.jsx)("div",{className:"table-responsive",children:(0,c.jsxs)("table",{className:"table border table-hover text-nowrap table-shopping-cart mb-0",children:[(0,c.jsx)("thead",{className:"text-muted",children:(0,c.jsxs)("tr",{className:"small text-uppercase",children:[(0,c.jsx)("th",{scope:"col",children:"Producto"}),(0,c.jsx)("th",{scope:"col",className:"wd-120",children:"Cantidad"}),(0,c.jsx)("th",{scope:"col",className:"wd-120",children:"Precio"}),(0,c.jsx)("th",{scope:"col",className:"text-center",children:"Accion"})]})}),(0,c.jsx)("tbody",{children:S.map((e,s)=>(0,c.jsxs)("tr",{children:[(0,c.jsx)("td",{children:(0,c.jsx)("div",{className:"media",children:(0,c.jsx)("div",{className:"media-body my-auto",children:(0,c.jsxs)("div",{className:"card-item-desc mt-0",children:[(0,c.jsx)("h6",{className:"font-weight-semibold mt-0 text-uppercase",children:e.name}),(0,c.jsxs)("dl",{className:"card-item-desc-1",children:[(0,c.jsx)("dt",{children:"Cantidad:"}),(0,c.jsx)("dd",{children:e.cantidad})]})]})})})}),(0,c.jsx)("td",{children:(0,c.jsxs)("div",{className:"handle-counter",id:"handleCounter",children:[(0,c.jsx)("button",{className:"counter-minus btn btn-light",onClick:()=>{let e;(e=[...S])[s].cantidad>1&&(e[s].cantidad--,F(e))},children:"-"}),(0,c.jsx)("button",{className:"counter-plus btn btn-light",onClick:()=>{let e;return e=[...S],void(e[s].cantidad++,F(e))},children:"+"})]})}),(0,c.jsx)("td",{children:(0,c.jsx)("div",{className:"price-wrap",children:(0,c.jsx)("span",{className:"price font-weight-bold tx-16",children:Number(e.venta).toFixed(2)})})}),(0,c.jsx)("td",{className:"text-center",children:(0,c.jsx)("a",{href:"#",onClick:()=>{let e;(e=[...S]).splice(s,1),F(e)},className:"remove-list text-danger tx-20 remove-button","data-abc":"true",children:(0,c.jsx)("i",{className:"fa fa-trash"})})})]}))})]})})}),(0,c.jsx)("div",{className:"col-12 mt-2",children:(0,c.jsxs)("button",{className:"btn btn-success w-100",onClick:D,disabled:0==k,children:["S/ ",Number(k).toFixed(2)," Despachar"]})})]})]})]})})})]})]})}),(0,c.jsx)("div",{className:"tab-pane",id:"tab5",children:(0,c.jsxs)("div",{className:"row",children:[(0,c.jsx)("div",{className:"col-4",children:(0,c.jsxs)("div",{className:"card custom-card",children:[(0,c.jsx)("div",{className:"card-header  border-bottom-0 pb-0",children:(0,c.jsx)("div",{children:(0,c.jsx)("div",{className:"d-flex",children:(0,c.jsx)("label",{className:"main-content-label my-auto pt-2",children:"CLIENTE DE RECEPCION"})})})}),(0,c.jsx)("div",{className:"card-body",children:(0,c.jsxs)("div",{className:"row",children:[(0,c.jsxs)("div",{className:"col-4 mb-2",children:[(0,c.jsx)("label",{htmlFor:"",children:"DOCUMENTO"}),(0,c.jsx)("input",{type:"text",name:"",value:a.recepcion.cliente.doc,readOnly:!0,className:"form-control",id:""})]}),(0,c.jsxs)("div",{className:"col-8 mb-2",children:[(0,c.jsx)("label",{htmlFor:"",children:"CLIENTE"}),(0,c.jsx)("input",{type:"text",name:"",value:a.recepcion.cliente.name,readOnly:!0,className:"form-control",id:""})]}),(0,c.jsxs)("div",{className:"col-6 mb-2",children:[(0,c.jsx)("label",{htmlFor:"",children:"TELEFONO"}),(0,c.jsx)("input",{type:"text",name:"",value:a.recepcion.cliente.telefono,readOnly:!0,className:"form-control",id:""})]}),(0,c.jsxs)("div",{className:"col-6 mb-2",children:[(0,c.jsx)("label",{htmlFor:"",children:"DIRECCION"}),(0,c.jsx)("input",{type:"text",name:"",value:a.recepcion.cliente.direccion,readOnly:!0,className:"form-control",id:""})]}),(0,c.jsxs)("div",{className:"col-8 mb-2",children:[(0,c.jsx)("label",{htmlFor:"",children:"INICIO"}),(0,c.jsx)("input",{type:"text",name:"",value:a.recepcion.start,readOnly:!0,className:"form-control",id:""})]}),(0,c.jsxs)("div",{className:"col-4 mb-2",children:[(0,c.jsx)("label",{htmlFor:"",children:"HORA"}),(0,c.jsx)("input",{type:"text",name:"",value:a.recepcion.hora_start,readOnly:!0,className:"form-control",id:""})]}),(0,c.jsxs)("div",{className:"col-8 mb-2",children:[(0,c.jsx)("label",{htmlFor:"",children:"FIN"}),(0,c.jsx)("input",{type:"text",name:"",value:a.recepcion.end,readOnly:!0,className:"form-control",id:""})]}),(0,c.jsxs)("div",{className:"col-4 mb-2",children:[(0,c.jsx)("label",{htmlFor:"",children:"HORA"}),(0,c.jsx)("input",{type:"text",name:"",value:a.recepcion.hora_end,readOnly:!0,className:"form-control",id:""})]})]})})]})}),(0,c.jsx)("div",{className:"col-4",children:(0,c.jsx)("div",{className:"card",children:(0,c.jsx)("div",{className:"card-body",children:(0,c.jsxs)("section",{children:[(0,c.jsx)("h5",{className:"text-start mb-2",children:"DETALLE DE  DESPACHOS "}),(0,c.jsx)("div",{className:"product",children:(0,c.jsxs)("table",{className:"table table-striped",children:[(0,c.jsx)("tbody",{children:a.recepcion.recepcion_productos.map(e=>(0,c.jsxs)("tr",{children:[(0,c.jsxs)("td",{children:[" ",(0,c.jsxs)("div",{children:[(0,c.jsx)("h6",{className:"text-primary",children:e.producto.name}),(0,c.jsxs)("span",{children:["x",e.cantidad]})]})]}),(0,c.jsx)("td",{children:(0,c.jsxs)("h6",{className:"text-success",children:["S/ ",Number(e.cantidad*e.venta).toFixed(2)]})})]}))}),(0,c.jsx)("tfoot",{children:(0,c.jsxs)("tr",{children:[(0,c.jsxs)("td",{children:[" ",(0,c.jsx)("h6",{className:"text-primary",children:"TOTAL"})]}),(0,c.jsxs)("td",{children:[" ",(0,c.jsxs)("span",{className:"text-success tx-20 font-weight-bold",children:["S/ ",Number(A).toFixed(2)]})]})]})})]})})]})})})}),(0,c.jsx)("div",{className:"col-4",children:(0,c.jsx)("div",{className:"card",children:(0,c.jsx)("div",{className:"card-body",children:(0,c.jsxs)("section",{children:[(0,c.jsx)("h5",{className:"text-start mb-2",children:"INFORMACION DE RECEPCION "}),(0,c.jsxs)("div",{className:"product",children:[(0,c.jsxs)("table",{className:"table table-striped",children:[(0,c.jsxs)("tbody",{children:[(0,c.jsxs)("tr",{children:[(0,c.jsxs)("td",{children:[" ",(0,c.jsx)("div",{children:(0,c.jsx)("h6",{className:"text-primary",children:"HABITACION"})})]}),(0,c.jsx)("td",{children:(0,c.jsxs)("h6",{className:"text-success",children:["S/ ",Number(T).toFixed(2)]})})]}),(0,c.jsxs)("tr",{children:[(0,c.jsxs)("td",{children:[" ",(0,c.jsx)("div",{children:(0,c.jsx)("h6",{className:"text-primary",children:"DESPACHOS"})})]}),(0,c.jsx)("td",{children:(0,c.jsxs)("h6",{className:"text-success",children:["S/ ",Number(A).toFixed(2)]})})]})]}),(0,c.jsxs)("tfoot",{children:[(0,c.jsxs)("tr",{children:[(0,c.jsxs)("td",{children:[" ",(0,c.jsx)("h6",{className:"text-primary",children:"TOTAL"})]}),(0,c.jsxs)("td",{children:[" ",(0,c.jsxs)("span",{className:"text-success tx-20 font-weight-bold",children:["S/ ",Number(T+A).toFixed(2)]})]})]}),(0,c.jsxs)("tr",{children:[(0,c.jsxs)("td",{children:[" ",(0,c.jsx)("h6",{className:"text-primary",children:"ADELANTO"})]}),(0,c.jsxs)("td",{children:[" ",(0,c.jsxs)("span",{className:"text-primary tx-20 font-weight-bold",children:["S/ ",Number(a.recepcion.adelanto).toFixed(2)]})]})]}),(0,c.jsxs)("tr",{children:[(0,c.jsxs)("td",{children:[" ",(0,c.jsx)("h6",{className:"text-primary",children:"DEUDA PENDIENTE"})]}),(0,c.jsxs)("td",{children:[" ",(0,c.jsxs)("span",{className:"text-info tx-20 font-weight-bold",children:["S/ ",Number(T+A-a.recepcion.adelanto).toFixed(2)]})]})]})]})]}),(0,c.jsx)("div",{className:"mt-4",children:(0,c.jsxs)("button",{className:"btn btn-success w-100",onClick:P,children:[(0,c.jsx)("i",{className:"fa fa-save"})," FINALIZAR "]})})]})]})})})})]})})]})})]})})]})}}},function(e){e.O(0,[827,245,109,774,888,179],function(){return e(e.s=5501)}),_N_E=e.O()}]);